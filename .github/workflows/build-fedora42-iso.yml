# .github/workflows/build-fedora42-iso.yml
name: Build Fedora 42 Minimal ISO

on:
  workflow_dispatch:  # allows manual triggering

jobs:
  build-iso:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repo
        uses: actions/checkout@v5

      - name: Install dependencies 
        run: |
          sudo apt-get update
          sudo apt-get install -y \
            xorriso isolinux syslinux debootstrap grub-common grub-efi-amd64-bin efibootmgr curl wget

      - name: Download Fedora 42 minimal netboot
        run: |
          wget https://dl.fedoraproject.org/pub/fedora/linux/releases/42/Workstation/x86_64/iso/Fedora-Workstation-Live-42-1.1.x86_64.iso

      - name: Prepare ISO workspace
        run: |
          mkdir -p iso_build
          cp Fedora-Workstation-Live-42-1.1.x86_64.iso iso_build/

      - name: Build minimal ISO
        run: |
          # For simplicity, we just use the netboot ISO as the "minimal repair ISO"
          # You could add mkosi here for full customization if desired
          cp iso_build/Fedora-Workstation-Live-42-1.1.x86_64.iso live-fedora42.iso

          
      - name: Upload ISO artifact
        uses: actions/upload-artifact@v4
        with:
          name: fedora42-live-iso
          path: Fedora-Workstation-Live-42-1.1.x86_64.iso
          retention-days: 7
          
